# 跨请求污染

在Spa页面中，整个生命周期中只有一个App对象实例，或一个Router对象实例或一个Store对象实例都是可以的，因为每个用户在使用浏览器访问SPA应用的时候，应用模块都会重新初始化，这也是一种单例模式



但是在SSR环境下，App应用模块通常只在服务器启动时初始化一次，同一个应用模块会砸多个服务器请求之间被复用，而我们的单例状态对象也是一样，也会在多个请求之间被复用：

- 当某个用户对共享的单例状态进行修改，那么这状态可能会意外得泄露给另一个在请求的用户
- 我们吧这种情况称之为：`跨请求状态污染`



解决方案就是：

- 可以在每个用户请求中位整个用用创建一个全新的实例，包括后面的·router，store
- 所以我们在创建App或者路由或者store的时候都是通过一个函数来创建的，保证每个请求都会创建一个全新的实例
- 这样子的缺点就很大，需要消耗更多的服务器资源